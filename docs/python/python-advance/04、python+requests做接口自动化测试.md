---
title: python+requests做接口自动化测试
date: 2023-02-13 00:00:01
---

# python+requests做接口自动化测试

## 接口测试流程

接口测试一般在功能测试之前进行

1、需求分析

2、接口文档分析

3、设计接口测试用例

4、执行接口测试：搭建环境；`jmeter`执行，`python`代码执行

5、提交跟踪和管理缺陷

6、输出接口测试报告

7、自动化接口测试和持续集成

## 如何进行分析接口文档以及接口文档的内容

## 如何设计接口测试用例，需要关注哪些点

## 环境搭建

## 创建项目目录结构和安装依赖

### 项目目录结构

1、`api`

2、`backkup`：存放备份数据，初始化的数据

3、`data`：存放测试数据

4、`lib`：存放第三方工具

5、`logs`：

6、`reports`：

7、`script`：

8、`python`文件：`config.py`, `execute.py`, `utils.py`

### 安装依赖

`requests`：用来发送请求

`pymysql`：用来连接数据库的

`parameterized`：用来做参数化，实现数据驱动测试

`jsonpath`：解析`json`响应数据的

`HTML TestRunner_PY3`:用来生成测试报告

### 在`config.py`文件中配置公有属性

```python
import os.path
# 公共配置py文件，存放配置信息
# 配置项目基础URL。因为URL的域名，端口经常变更，所以独立出来代码维护性
BASE_URL = '项目地址'

# BASE_PATH：项目的绝对路径；该代码始终能获取到当前项目的绝对路径。
# 生成日志、报告、备份文件时都需要使用BASE_PATH
BASE_PATH = os.path.dirname(os.path.abspath(__file__))

# 项目请求头设置
BASE_HEADERS = {'Content-Type': 'application/json', 'Authorization': ''}

# 后期会添加更多属性到这个文件中

```

### 在`utils.py`编写初始化日志的代码

```python
# #自定义工具的模块
# 这个文件中编写初始化日志的代码

```

### 在`api.__init__.py`中初始化日志

```python
# 编写封装被测系统API接口的模块
# 初始化日志
from utils import init_logging
import logging

# 初始化日志
init_logging()

# 测试打印日志
logging.info('Test日志打印')
```



## 封装系统接口

## 用python根据测试用例编写测试脚本

## 实现数据驱动测试

## 生成测试报告

## 登录态管理

## 多线程执行测试用例

## 多线程执行测试用例

## 服务端备份/还原/初始化

## Flask实现Mock测试



## python自动化接口测试需要使用哪些库？分别有什么作用？

当使用Python进行自动化接口测试时，通常需要使用以下一些常用的库和工具：

1. `requests`库：这是一个常用的Python HTTP库，可以方便地发送HTTP请求，并获取响应。在自动化接口测试中，可以使用requests库来模拟HTTP请求，包括GET、POST、PUT、DELETE等请求方法，并验证响应。
2. `json`库：这是Python的内置库，可以方便地对`JSON`数据进行解析和操作。在自动化接口测试中，通常接口返回的数据是`JSON`格式的，可以使用`json`库对返回的数据进行解析，并验证响应中的字段和值是否符合预期。
3. `unittest`库：这是Python的标准测试库，可以用于编写和执行单元测试和集成测试。在自动化接口测试中，可以使用`unittest`库编写测试用例和测试套件，以便自动执行并验证接口的功能和性能。
4. `Pytest`库：这是一个流行的Python测试框架，可以支持单元测试和功能测试，并具有良好的测试报告和插件支持。在自动化接口测试中，可以使用`Pytest`库编写测试用例和测试套件，并生成测试报告，以便更好地跟踪和管理测试结果。
5. `Allure`库：这是一个开源的测试报告框架，可以生成漂亮的HTML测试报告，并支持历史测试结果和趋势分析。在自动化接口测试中，可以使用Allure库生成详细的测试报告，并在测试结果发生变化时轻松跟踪和分析。
6. `Swagger UI`：这是一个常用的`API`文档工具，可以通过Web界面直观地查看和测试`API`接口。在自动化接口测试中，可以使用`Swagger UI`来查看和理解接口的请求参数和响应数据，并快速构建测试用例和测试数据。

这些库和工具都非常有用，可以帮助自动化测试工程师轻松地进行接口测试，并快速发现和解决问题。

